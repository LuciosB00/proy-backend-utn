generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Rol {
    ESTUDIANTE
    DOCENTE
    ADMIN
}

model Usuario {
    id        Int      @id @default(autoincrement())
    nombre    String
    email     String   @unique
    password  String
    rol       Rol
    cursosDocente Curso[] @relation("DocenteCursos")
    inscripciones Inscripcion[]
    asistencia Asistencia[]
    calificacion Calificacion[]
}

model Curso {
    id        Int      @id @default(autoincrement())
    titulo    String
    descripcion String?
    docenteId Int
    docente   Usuario  @relation("DocenteCursos", fields: [docenteId], references: [id])
    inscripciones Inscripcion[]
    asistencias   Asistencia[]
    calificaciones Calificacion[]
}

model Inscripcion {
    id           Int      @id @default(autoincrement())
    estudianteId Int
    cursoId      Int
    estado       String
    estudiante   Usuario  @relation(fields: [estudianteId], references: [id])
    curso        Curso    @relation(fields: [cursoId], references: [id])
}

model Asistencia {
    id           Int      @id @default(autoincrement())
    fecha        DateTime
    presente     Boolean
    estudianteId Int
    cursoId      Int
    estudiante   Usuario  @relation(fields: [estudianteId], references: [id])
    curso        Curso    @relation(fields: [cursoId], references: [id])
}

model Calificacion {
    id           Int      @id @default(autoincrement())
    nota         Float
    tipo         String
    fecha        DateTime
    estudianteId Int
    cursoId      Int
    estudiante   Usuario  @relation(fields: [estudianteId], references: [id])
    curso        Curso    @relation(fields: [cursoId], references: [id])
}